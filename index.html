<!DOCTYPE html>
<html lang="vi" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="·ª®ng d·ª•ng h·ªçc t·ª´ v·ª±ng ti·∫øng Anh v·ªõi Spaced Repetition System">
    <title>VocabMaster - H·ªçc T·ª´ V·ª±ng Ti·∫øng Anh</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#6366f1">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-left">
            <button class="menu-toggle" id="menuToggle" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <div class="logo">
                <span class="logo-icon">üìö</span>
                <span class="logo-text">VocabMaster</span>
            </div>
        </div>
        <div class="header-right">
            <button class="btn-icon" id="syncBtn" aria-label="ƒê·ªìng b·ªô" title="ƒê·ªìng b·ªô d·ªØ li·ªáu">
                ‚òÅÔ∏è
            </button>
            <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
                <span class="theme-icon-dark">üåô</span>
                <span class="theme-icon-light">‚òÄÔ∏è</span>
            </button>
        </div>
    </header>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h2>Ch·ªß ƒë·ªÅ</h2>
            <button class="btn-icon" id="addTopicBtn" aria-label="Th√™m ch·ªß ƒë·ªÅ">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="12" y1="5" x2="12" y2="19"></line>
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
            </button>
        </div>
        <nav class="sidebar-nav">
            <button class="nav-item active" data-view="dashboard">
                <span class="nav-icon">üìä</span>
                <span class="nav-text">Dashboard</span>
            </button>
            <button class="nav-item" data-view="all-words">
                <span class="nav-icon">üìñ</span>
                <span class="nav-text">T·∫•t c·∫£ t·ª´ v·ª±ng</span>
            </button>
            <button class="nav-item" data-view="review-due">
                <span class="nav-icon">üîî</span>
                <span class="nav-text">C·∫ßn √¥n t·∫≠p</span>
                <span class="nav-badge" id="dueBadge">0</span>
            </button>
        </nav>
        <div class="sidebar-divider"></div>
        <div class="topics-list" id="topicsList">
            <!-- Topics will be rendered here -->
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content" id="mainContent">
        <!-- Dashboard View -->
        <section class="view active" id="dashboardView">
            <div class="view-header">
                <h1>Dashboard</h1>
            </div>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üìö</div>
                    <div class="stat-info">
                        <span class="stat-value" id="statTotalWords">0</span>
                        <span class="stat-label">T·ªïng t·ª´ v·ª±ng</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚úÖ</div>
                    <div class="stat-info">
                        <span class="stat-value" id="statMastered">0</span>
                        <span class="stat-label">ƒê√£ thu·ªôc</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üìù</div>
                    <div class="stat-info">
                        <span class="stat-value" id="statLearning">0</span>
                        <span class="stat-label">ƒêang h·ªçc</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üî•</div>
                    <div class="stat-info">
                        <span class="stat-value" id="statStreak">0</span>
                        <span class="stat-label">Ng√†y li√™n ti·∫øp</span>
                    </div>
                </div>
            </div>
            
            <div class="dashboard-sections">
                <div class="dashboard-section">
                    <div class="section-header">
                        <h2>‚ö†Ô∏è T·ª´ c·∫ßn √¥n t·∫≠p h√¥m nay</h2>
                        <button class="btn btn-primary" id="startReviewBtn">√în t·∫≠p ngay</button>
                    </div>
                    <div class="due-words-preview" id="dueWordsPreview">
                        <p class="empty-state">Kh√¥ng c√≥ t·ª´ n√†o c·∫ßn √¥n t·∫≠p</p>
                    </div>
                </div>
                
                <div class="dashboard-section">
                    <div class="section-header">
                        <h2>üìà Ti·∫øn ƒë·ªô tu·∫ßn n√†y</h2>
                    </div>
                    <div class="weekly-chart" id="weeklyChart">
                        <!-- Chart will be rendered here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Topic View -->
        <section class="view" id="topicView">
            <div class="view-header">
                <div class="view-title">
                    <span class="topic-icon" id="topicViewIcon">üìÅ</span>
                    <h1 id="topicViewTitle">Ch·ªß ƒë·ªÅ</h1>
                </div>
                <div class="view-actions">
                    <button class="btn btn-secondary" id="reviewTopicBtn">
                        <span>üìñ</span> √în t·∫≠p
                    </button>
                    <button class="btn btn-secondary" id="testTopicBtn">
                        <span>‚úçÔ∏è</span> Ki·ªÉm tra
                    </button>
                    <button class="btn btn-primary" id="addWordBtn">
                        <span>+</span> Th√™m t·ª´
                    </button>
                </div>
            </div>
            <div class="words-list" id="wordsList">
                <!-- Words will be rendered here -->
            </div>
        </section>

        <!-- All Words View -->
        <section class="view" id="allWordsView">
            <div class="view-header">
                <h1>T·∫•t c·∫£ t·ª´ v·ª±ng</h1>
                <div class="view-actions">
                    <button class="btn btn-secondary" id="reviewAllBtn">
                        <span>üìñ</span> √în t·∫≠p t·∫•t c·∫£
                    </button>
                    <button class="btn btn-secondary" id="testAllBtn">
                        <span>‚úçÔ∏è</span> Ki·ªÉm tra t·∫•t c·∫£
                    </button>
                </div>
            </div>
            <div class="search-bar">
                <input type="text" id="searchInput" placeholder="T√¨m ki·∫øm t·ª´ v·ª±ng...">
            </div>
            <div class="words-list" id="allWordsList">
                <!-- All words will be rendered here -->
            </div>
        </section>

        <!-- Review Due View -->
        <section class="view" id="reviewDueView">
            <div class="view-header">
                <h1>üîî T·ª´ c·∫ßn √¥n t·∫≠p</h1>
                <div class="view-actions">
                    <button class="btn btn-primary" id="startDueReviewBtn">B·∫Øt ƒë·∫ßu √¥n t·∫≠p</button>
                </div>
            </div>
            <div class="words-list" id="dueWordsList">
                <!-- Due words will be rendered here -->
            </div>
        </section>

        <!-- Review Mode -->
        <section class="view" id="reviewView">
            <div class="review-container">
                <div class="review-progress">
                    <span id="reviewProgress">0 / 0</span>
                    <button class="btn-icon" id="closeReviewBtn" aria-label="ƒê√≥ng">‚úï</button>
                </div>
                <div class="flashcard" id="flashcard">
                    <div class="flashcard-inner">
                        <div class="flashcard-front">
                            <button class="speak-btn" id="speakBtn" aria-label="Ph√°t √¢m">üîä</button>
                            <p class="flashcard-word" id="flashcardWord">Word</p>
                        </div>
                        <div class="flashcard-back">
                            <p class="flashcard-meaning" id="flashcardMeaning">Nghƒ©a</p>
                        </div>
                    </div>
                </div>
                <p class="flashcard-hint">Click ƒë·ªÉ l·∫≠t th·∫ª</p>
                <div class="review-actions">
                    <button class="btn btn-secondary" id="prevCardBtn">‚Üê Tr∆∞·ªõc</button>
                    <button class="btn btn-primary" id="nextCardBtn">Ti·∫øp ‚Üí</button>
                </div>
            </div>
        </section>

        <!-- Test Mode -->
        <section class="view" id="testView">
            <div class="test-container">
                <div class="test-progress">
                    <span id="testProgress">0 / 0</span>
                    <span id="testScore">ƒê√∫ng: 0</span>
                    <button class="btn-icon" id="closeTestBtn" aria-label="ƒê√≥ng">‚úï</button>
                </div>
                <div class="test-card">
                    <p class="test-meaning" id="testMeaning">Nghƒ©a ti·∫øng Vi·ªát</p>
                    <input type="text" class="test-input" id="testInput" placeholder="Nh·∫≠p t·ª´ ti·∫øng Anh..." autocomplete="off">
                    <div class="test-feedback" id="testFeedback"></div>
                </div>
                <div class="test-actions">
                    <button class="btn btn-secondary" id="skipWordBtn">B·ªè qua</button>
                    <button class="btn btn-primary" id="checkAnswerBtn">Ki·ªÉm tra</button>
                </div>
            </div>
        </section>

        <!-- Test Result -->
        <section class="view" id="testResultView">
            <div class="result-container">
                <div class="result-icon">üéâ</div>
                <h1>K·∫øt qu·∫£ ki·ªÉm tra</h1>
                <div class="result-stats">
                    <div class="result-stat">
                        <span class="result-value" id="resultCorrect">0</span>
                        <span class="result-label">ƒê√∫ng</span>
                    </div>
                    <div class="result-stat">
                        <span class="result-value" id="resultWrong">0</span>
                        <span class="result-label">Sai</span>
                    </div>
                    <div class="result-stat">
                        <span class="result-value" id="resultAccuracy">0%</span>
                        <span class="result-label">T·ª∑ l·ªá</span>
                    </div>
                </div>
                <div class="wrong-words" id="wrongWordsList">
                    <!-- Wrong words will be shown here -->
                </div>
                <button class="btn btn-primary" id="backToDashboardBtn">V·ªÅ Dashboard</button>
            </div>
        </section>
    </main>

    <!-- Modal: Add/Edit Topic -->
    <div class="modal" id="topicModal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="topicModalTitle">Th√™m ch·ªß ƒë·ªÅ</h2>
                <button class="btn-icon modal-close" aria-label="ƒê√≥ng">‚úï</button>
            </div>
            <form id="topicForm">
                <div class="form-group">
                    <label for="topicName">T√™n ch·ªß ƒë·ªÅ</label>
                    <input type="text" id="topicName" required placeholder="VD: ƒê·ªông v·∫≠t, Th·ª©c ƒÉn...">
                </div>
                <div class="form-group">
                    <label>Ch·ªçn icon</label>
                    <div class="icon-picker" id="iconPicker">
                        <button type="button" class="icon-option selected" data-icon="üìÅ">üìÅ</button>
                        <button type="button" class="icon-option" data-icon="üìö">üìö</button>
                        <button type="button" class="icon-option" data-icon="üéì">üéì</button>
                        <button type="button" class="icon-option" data-icon="üíº">üíº</button>
                        <button type="button" class="icon-option" data-icon="üè†">üè†</button>
                        <button type="button" class="icon-option" data-icon="üçî">üçî</button>
                        <button type="button" class="icon-option" data-icon="üê∂">üê∂</button>
                        <button type="button" class="icon-option" data-icon="‚úàÔ∏è">‚úàÔ∏è</button>
                        <button type="button" class="icon-option" data-icon="üéµ">üéµ</button>
                        <button type="button" class="icon-option" data-icon="‚öΩ">‚öΩ</button>
                        <button type="button" class="icon-option" data-icon="üåç">üåç</button>
                        <button type="button" class="icon-option" data-icon="üíª">üíª</button>
                    </div>
                </div>
                <div class="form-group">
                    <label>Ch·ªçn m√†u</label>
                    <div class="color-picker" id="colorPicker">
                        <button type="button" class="color-option selected" data-color="#FF6B6B" style="background:#FF6B6B"></button>
                        <button type="button" class="color-option" data-color="#4ECDC4" style="background:#4ECDC4"></button>
                        <button type="button" class="color-option" data-color="#45B7D1" style="background:#45B7D1"></button>
                        <button type="button" class="color-option" data-color="#96CEB4" style="background:#96CEB4"></button>
                        <button type="button" class="color-option" data-color="#FFEAA7" style="background:#FFEAA7"></button>
                        <button type="button" class="color-option" data-color="#DDA0DD" style="background:#DDA0DD"></button>
                        <button type="button" class="color-option" data-color="#98D8C8" style="background:#98D8C8"></button>
                        <button type="button" class="color-option" data-color="#F7DC6F" style="background:#F7DC6F"></button>
                    </div>
                </div>
                <input type="hidden" id="topicId">
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary modal-close">H·ªßy</button>
                    <button type="submit" class="btn btn-primary">L∆∞u</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal: Add/Edit Word -->
    <div class="modal" id="wordModal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="wordModalTitle">Th√™m t·ª´ v·ª±ng</h2>
                <button class="btn-icon modal-close" aria-label="ƒê√≥ng">‚úï</button>
            </div>
            <form id="wordForm">
                <div class="form-group">
                    <label for="wordEnglish">Ti·∫øng Anh</label>
                    <input type="text" id="wordEnglish" required placeholder="VD: apple">
                </div>
                <div class="form-group">
                    <label for="wordVietnamese">Ti·∫øng Vi·ªát</label>
                    <input type="text" id="wordVietnamese" required placeholder="VD: qu·∫£ t√°o">
                </div>
                <input type="hidden" id="wordId">
                <input type="hidden" id="wordTopicId">
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary modal-close">H·ªßy</button>
                    <button type="submit" class="btn btn-primary">L∆∞u</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal: Test/Review Config -->
    <div class="modal" id="configModal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="configModalTitle">C·∫•u h√¨nh</h2>
                <button class="btn-icon modal-close" aria-label="ƒê√≥ng">‚úï</button>
            </div>
            <form id="configForm">
                <div class="form-group">
                    <label>Ph·∫°m vi</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="scope" value="topic" checked>
                            <span>Ch·ªß ƒë·ªÅ hi·ªán t·∫°i</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="scope" value="all">
                            <span>T·∫•t c·∫£ t·ª´ v·ª±ng</span>
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label>S·ªë l∆∞·ª£ng t·ª´</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="count" value="all" checked>
                            <span>T·∫•t c·∫£ (<span id="totalWordsCount">0</span> t·ª´)</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="count" value="random">
                            <span>Random:</span>
                            <input type="number" id="randomCount" min="1" value="10" class="inline-input">
                            <span>t·ª´</span>
                        </label>
                    </div>
                </div>
                <input type="hidden" id="configMode">
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary modal-close">H·ªßy</button>
                    <button type="submit" class="btn btn-primary">B·∫Øt ƒë·∫ßu</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal: Confirm Delete -->
    <div class="modal" id="confirmModal">
        <div class="modal-overlay"></div>
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2>X√°c nh·∫≠n x√≥a</h2>
                <button class="btn-icon modal-close" aria-label="ƒê√≥ng">‚úï</button>
            </div>
            <p id="confirmMessage">B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a?</p>
            <div class="form-actions">
                <button type="button" class="btn btn-secondary modal-close">H·ªßy</button>
                <button type="button" class="btn btn-danger" id="confirmDeleteBtn">X√≥a</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Scripts -->
    <script src="js/storage.js"></script>
    <script src="js/firebase.js"></script>
    <script src="js/srs.js"></script>
    <script src="js/speech.js"></script>
    <script src="js/stats.js"></script>
    <script src="js/topics.js"></script>
    <script src="js/vocabulary.js"></script>
    <script src="js/review.js"></script>
    <script src="js/test.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
